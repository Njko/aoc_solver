# Day 10: Factory (2025)

## Part 1

### Problem Description

We are given a set of "machines". Each machine has:
-   A set of "indicator lights" in a specific initial configuration (Goal: all lights in specific states). Wait, "goal is to simultaneously configure" means the *Target* is the configuration given, and initially they are all OFF.
    -   Actually, the problem says: "indicator light diagram like [.##.] means that the machine... goal is to simultaneously configure...". So Target = `[.##.]`, Initial = `[....]`.
    -   However, over GF(2), being ON (1) means we need to flip it odd times. Effectively `Target Vector = A * Press Vector`.
-   A set of buttons. Each button toggles a subset of lights.
-   We want to find the **minimum total button presses** to reach the target state.

### Approach

This is a system of linear equations over the field GF(2).
Let `x_i` be the number of times button `i` is pressed. Since `2` presses cancels out, `x_i` is either 0 or 1.
The state of light `j` is determined by:
`Sum(A[j][i] * x_i) mod 2 = Target[j]`
Where `A[j][i] = 1` if button `i` toggles light `j`.

1.  **Parsing**: Extract target vector and button column vectors.
2.  **Gaussian Elimination**:
    -   Form Augmented Matrix `[A | Target]`.
    -   Perform row reduction to Row Echelon Form using XOR operations.
3.  **Solving**:
    -   Identify pivot variables and free variables.
    -   This system may have multiple solutions (dependent columns).
    -   To find the **minimum presses** (minimum Hamming weight of `x`), we iterate over all possible values of the "free variables".
    -   For each assignment of free variables, determine the pivot variables via back-substitution.
    -   Calculate weight and track minimum.

### Solution

The solution for my input was **409**.

## Part 2

### Problem Description

We are now given Joltage requirements. Each machine has a set of counters (initially 0).
Buttons increase counters by 1 (cumulative).
We must reach exact target values for all counters.
Goal: Minimum total button presses.

### Approach

This is a system of linear equations over Integers: `Ax = b`.
We need non-negative integer solutions that minimize `sum(x)`.

1.  **Solver**:
    -   Use **Gaussian Elimination** over Rational numbers (`fractions.Fraction`) to solve the system `Ax = b`.
    -   Since the system is typically under-determined (more buttons than counters), we express the **Pivot Variables** in terms of the **Free Variables**.
2.  **Integer Optimization**:
    -   We need to find non-negative integer assignments for Free Variables such that all Pivot Variables are also non-negative integers.
    -   Since we want to minimize the sum of all variables, we can perform a search over the free variables (start from small values).
    -   **Optimization**: To speed up the inner loop, we pre-compile the back-substitution equations into Integer Arithmetic (multiplying by LCM of denominators) to avoid slow Fraction operations during the search.
    -   We iterate through combinations of free variables (with adaptive limits based on the number of free variables) to find the valid assignment with the minimum sum.

### Solution

The solution for my input was **15489**.

## Code Reference

[day_10.py](file:///Users/a422gq/Documents/antigravity/aoc_solver/solvers/days/y2025/day_10.py)
