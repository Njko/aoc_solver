# Day 3: Lobby (2025)

## Problem Description

We are in a lobby with offline elevators and an offline escalator. We need to power the escalator using batteries labeled with joltage ratings (digits 1-9).
The batteries are arranged in banks (lines of input).
For each bank, we need to select a specific number of batteries to form the largest possible number (joltage). The relative order of the selected batteries must be preserved.

## Part 1

We need to select **exactly two** batteries from each bank to maximize the resulting 2-digit number.

### Approach

For each line, we want to find digits $d_1$ and $d_2$ at indices $i$ and $j$ such that $i < j$ and the number formed by $d_1 d_2$ is maximized.

Since the number of digits is small (2), the tens digit ($d_1$) has the most significant impact.
1.  We iterate from 9 down to 1 to find the largest possible first digit ($d_1$) that appears at an index $i < \text{length} - 1$.
2.  Once we find the best $d_1$, we look at all its occurrences. For each valid occurrence at index $i$, we look for the largest digit $d_2$ in the substring starting at $i+1$.
3.  We compute $d_1 \times 10 + d_2$ and take the maximum.

### Solution

The total output joltage for my input was **17443**.

## Part 2

We need to select **exactly twelve** batteries from each bank to maximize the resulting 12-digit number.

### Approach

This is a variation of the "Largest Number from Subsequence" problem. We need to select a subsequence of length $k=12$ that forms the lexicographically largest string.

We can use a **Greedy Approach with a Stack**:
1.  We determine how many digits we can discard: `to_discard = len(line) - 12`.
2.  We iterate through the digits of the line.
3.  For each digit `d`, we check if it is larger than the last digit on our stack.
    - If `d > stack.top()` and we still have quota to discard (`to_discard > 0`), we pop the smaller digit from the stack and decrement `to_discard`.
    - We repeat this check until the condition fails or the stack is empty.
4.  We push `d` onto the stack.
5.  After processing all digits, if we still have `to_discard > 0` (e.g., for a strictly decreasing sequence), we truncate the stack from the end.
6.  The first 12 digits in the stack form our answer.

### Solution

The total output joltage for Part 2 was **172167155440541**.

## Verification

I verified the solution using the example provided in the problem description.

**Part 1 Example:**
- `987654321111111` -> `98`
- `811111111111119` -> `89`
- `234234234234278` -> `78`
- `818181911112111` -> `92`
- Total: `357`

**Part 2 Example:**
- `987654321111111` -> `987654321111`
- `811111111111119` -> `811111111119`
- `234234234234278` -> `434234234278`
- `818181911112111` -> `888911112111`
- Total: `3121910778619`

Both parts passed verification with the example data before running on the full input.
