# Day 9: Movie Theater (2025)

## Part 1

### Problem Description

We are in a movie theater with a tiled floor. Some tiles are red (`#`). We are given the coordinates of these red tiles. The goal is to find the **largest rectangle** (by area) such that:
1.  Two **opposite corners** of the rectangle are red tiles.
2.  The area is calculated using the number of tiles included (inclusive bounds).
    -   Formula: `Area = (abs(x1 - x2) + 1) * (abs(y1 - y2) + 1)`

### Approach

We are given a list of coordinates `(x, y)`. Since relevant input sizes for this type of problem are usually manageable (e.g., N < 5000), a brute-force approach iterating over all pairs of points is feasible.

1.  **Parse Input**: Read all `x,y` coordinates into a list.
2.  **Iterate Pairs**: Use a nested loop to check every unique pair of points `(p1, p2)`.
3.  **Calculate Area**:
    -   `width = abs(p1.x - p2.x) + 1`
    -   `height = abs(p1.y - p2.y) + 1`
    -   `area = width * height`
4.  **Track Max**: Keep track of the maximum area found.

### Solution

The solution for my input was **4749672288**.

## Part 2

### Problem Description

The problem adds a constraint: the rectangle must consist **only** of red or green tiles.
-   Red tiles are the given vertices.
-   Green tiles line the edges between adjacent red tiles in the input list.
-   The "Interior" of the loop formed by red/green tiles is also green.
-   Essentially: Find the max Area rectangle (with red corners) fully contained within the polygon defined by the red tile vertices.

### Approach

The coordinate range is large (~100,000), so a direct grid is feasible but memory-intensive if safe, but safer is **Coordinate Compression**.

1.  **Coordinate Compression**:
    -   Collect all unique X and Y coordinates.
    -   Map the large coordinate space to a compressed grid of size `2N x 2N` (roughly 1000x1000).
    -   Even indices in the compressed grid represent original coordinates.
    -   Odd indices represent the intervals between coordinates.

2.  **Grid Construction**:
    -   Draw the polygon boundary on the compressed grid (Red + Green tiles).
    -   Use **Flood Fill** from the outside to identify "Invalid" (Outside) cells.
    -   All non-outside cells are "Valid" (Red, Green, or Interior).

3.  **Prefix Sum Validation**:
    -   Construct a 2D Prefix Sum array on the "Invalid" cells.
    -   This allows `O(1)` checking of any rectangular sub-region.

4.  **Solver Loop**:
    -   Iterate all pairs of Red tiles.
    -   Define the rectangle in compressed space.
    -   Check if the rectangle contains any Invalid cells using the Prefix Sum.
    -   If valid, calculate the area using the **Original** coordinates.

### Solution

The solution for my input was **1479665889**.

## Code Reference

[day_09.py](file:///Users/a422gq/Documents/antigravity/aoc_solver/solvers/days/y2025/day_09.py)
