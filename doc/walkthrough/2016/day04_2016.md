# Day 4: Security Through Obscurity

## Part 1

The problem asks us to validate "rooms" based on their encrypted names and checksums. A room is real if the checksum is the five most common letters in the encrypted name, in order, with ties broken by alphabetization.

### Strategy

1.  **Parsing**: Extract the encrypted name, sector ID, and checksum from the string format `aaaaa-bbb-z-y-x-123[abxyz]`. Regular expressions are useful here.
2.  **Counting**: Count the frequency of each letter in the encrypted name (ignoring dashes).
3.  **Sorting**: Sort the unique letters based on two criteria:
    *   Frequency (descending): `-count`
    *   Alphabetical order (ascending): `char`
4.  **Validation**: Take the top 5 sorted letters and compare them to the given checksum.
5.  **Sum**: If valid, add the sector ID to the total.

### Code Snippet

```python
def _is_real_room(self, name, checksum):
    name_without_dashes = name.replace('-', '')
    counts = Counter(name_without_dashes)
    
    # Sort by count (descending) then by char (ascending)
    sorted_chars = sorted(counts.keys(), key=lambda char: (-counts[char], char))
    
    calculated_checksum = "".join(sorted_chars[:5])
    
    return calculated_checksum == checksum
```

## Part 2

The second part asks us to decrypt the room names to find the one where North Pole objects are stored. The encryption is a shift cipher (Caesar cipher), where the shift amount is the sector ID.

### Strategy

1.  **Iterate**: Go through all valid rooms found in Part 1.
2.  **Decrypt**: For each character in the name:
    *   If it's a dash `-`, it becomes a space.
    *   Otherwise, shift the character forward by `sector_id` positions in the alphabet, wrapping around from 'z' to 'a'.
    *   Formula: `(ord(char) - ord('a') + sector_id) % 26`
3.  **Search**: Check if the decrypted name contains "northpole object storage".
4.  **Return**: Return the sector ID of the matching room.

### Code Snippet

```python
def _decrypt_name(self, encrypted_name, sector_id):
    decrypted = ""
    for char in encrypted_name:
        if char == '-':
            decrypted += ' '
        else:
            shifted = (ord(char) - ord('a') + sector_id) % 26
            decrypted += chr(ord('a') + shifted)
    return decrypted
```
