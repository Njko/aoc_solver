# Day 7: Internet Protocol Version 7

## Part 1

The problem asks us to support IPv7 by identifying IPs that support Transport Layer Snooping (TLS). An IP supports TLS if it has an Autonomous Bridge Bypass Annotation (ABBA).

An ABBA is a 4-character sequence `xyyx` where `x != y`. However, the IP must *not* have an ABBA within any hypernet sequences (sequences within square brackets `[...]`).

### Strategy

1.  **Parsing**: Split the IP string into "supernet" sequences (outside brackets) and "hypernet" sequences (inside brackets). We can use `re.split(r'[\[\]]', line)`. The even-indexed parts are supernets, and odd-indexed parts are hypernets.
2.  **ABBA Check**: Implement a helper to check if a string contains an ABBA. Iterate through the string and check for the pattern `s[i] == s[i+3]` and `s[i+1] == s[i+2]` and `s[i] != s[i+1]`.
3.  **Validation**: An IP is valid if:
    *   At least one supernet sequence contains an ABBA.
    *   *None* of the hypernet sequences contain an ABBA.

### Code Snippet

```python
def _has_abba(s):
    for i in range(len(s) - 3):
        if s[i] == s[i+3] and s[i+1] == s[i+2] and s[i] != s[i+1]:
            return True
    return False

# ... inside loop ...
parts = re.split(r'[\[\]]', line)
supernets = parts[::2]
hypernets = parts[1::2]

if any(_has_abba(s) for s in supernets) and not any(_has_abba(h) for h in hypernets):
    count += 1
```

## Part 2

The second part asks for IPs that support Super-Secret Listening (SSL). An IP supports SSL if it has an Area-Broadcast Accessor (ABA) in a supernet sequence and a corresponding Byte Allocation Block (BAB) in a hypernet sequence.

An ABA is a 3-character sequence `xyx` where `x != y`. The corresponding BAB is `yxy`.

### Strategy

1.  **Parsing**: Same as Part 1.
2.  **Find ABAs**: Iterate through all supernet sequences and collect all unique ABAs (set of strings).
3.  **Check BABs**: For each found ABA `xyx`, construct the corresponding BAB `yxy`. Check if this BAB appears in *any* of the hypernet sequences.
4.  **Validation**: If any matching BAB is found, the IP supports SSL.

### Code Snippet

```python
def _get_abas(s):
    abas = set()
    for i in range(len(s) - 2):
        if s[i] == s[i+2] and s[i] != s[i+1]:
            abas.add(s[i:i+3])
    return abas

# ... inside loop ...
abas = set()
for s in supernets:
    abas.update(_get_abas(s))

found_ssl = False
for aba in abas:
    bab = aba[1] + aba[0] + aba[1]
    if any(bab in h for h in hypernets):
        found_ssl = True
        break
if found_ssl:
    count += 1
```
